"use strict";(self.webpackChunkconnect=self.webpackChunkconnect||[]).push([[937],{937:function(e,t,n){n.r(t),n.d(t,{default:function(){return W}});var r=n(4165),a=n(5861),i=n(9439),s=n(2791),o=n(6739),c=n(3967),l=n(5527),u=n(4554),d=n(3400),p=n(890),m=n(4721),f=n(8254),h=n(2938),x=n(8265),g=n(3044),Z=n(184),j=(0,s.memo)((function(e){var t=e.feeling,n=x.I8.currentUser;return(0,Z.jsxs)(u.Z,{mb:1,display:"flex",alignItems:"center",children:[(0,Z.jsx)(g.Z,{src:null===n||void 0===n?void 0:n.photoURL,sx:{mr:1}}),(0,Z.jsx)(p.Z,{variant:"subtitle2",children:null===n||void 0===n?void 0:n.displayName}),t&&(0,Z.jsxs)(p.Z,{variant:"subtitle2",children:["\xa0","is feeling ".concat(t)]})]})})),v=n(8550),y=(0,s.memo)((function(e){var t=e.text,n=e.dispatch;return(0,Z.jsx)(v.Z,{placeholder:"What's on your mind?",variant:"standard",fullWidth:!0,multiline:!0,rows:5,value:t,onChange:function(e){return n({type:"text",payload:e.target.value})}})})),b=n(7858),k=n(8955);function C(e){var t=e.dispatch,n=(0,c.Z)().palette,r=(0,s.useCallback)((function(e){return t({type:"emoji",payload:e.emoji})}),[]);return(0,Z.jsx)(f.Jx,{tooltipProps:{title:"Emoji"},icon:(0,Z.jsx)(b.Z,{}),muiMenuProps:{anchorOrigin:{horizontal:"left",vertical:"bottom"},transformOrigin:{horizontal:"right",vertical:"top"}},children:(0,Z.jsx)(k.ZP,{theme:"light"===n.mode?k.Q2.LIGHT:k.Q2.DARK,lazyLoadEmojis:!0,onEmojiClick:r,searchDisabled:!0,skinTonesDisabled:!0,categories:[{category:k.Rj.SMILEYS_PEOPLE,name:"Faces & People"}]})})}var w=n(2763),I=n(7888),P=n(5397),S=(0,s.memo)((function(e){var t=e.images,n=e.dispatch,r=(0,c.Z)().palette;return t.length<1?null:(0,Z.jsxs)(u.Z,{border:"1px solid ".concat(r.divider),className:"imageViewer",children:[(0,Z.jsx)(d.Z,{onClick:function(){return n({type:"deleteImages"})},size:"small",className:"deleteButton",sx:{backgroundColor:r.grey["light"===r.mode?300:800],":hover":{backgroundColor:"light"===r.mode?"#d3d2d2":"#494848"}},children:(0,Z.jsx)(P.Z,{fontSize:"small"})}),(0,Z.jsx)(w.Z,{cols:t.length<2?1:2,children:t.map((function(e,t){return(0,Z.jsx)(I.Z,{children:(0,Z.jsx)("img",{src:e.url,alt:e.file.name})},t)}))})]})})),E=n(68),L=n(8980),N=n(2783);function O(e){var t=e.dispatch;return(0,Z.jsx)(E.Z,{title:"Photo",placement:"top",TransitionComponent:L.Z,children:(0,Z.jsxs)(d.Z,{component:"label",sx:{color:"initial"},children:[(0,Z.jsx)("img",{src:N.uO,alt:"pickImage"}),(0,Z.jsx)("input",{type:"file",accept:"image/*",hidden:!0,onChange:function(e){var n=e.target.files,r=[];n&&Array.from(n).forEach((function(e){var t=URL.createObjectURL(e);r.push({url:t,file:e})})),t({type:"addImages",payload:r})},multiple:!0})]})})}var R=n(3786),z=["\ud83d\ude04 Happy","\ud83e\udd29 Excited","\ud83e\udd70 In Love","\ud83d\ude2e Surprised","\ud83d\ude21 Angry","\ud83d\ude23 Frustrated","\ud83d\ude14 Sad","\ud83d\ude2b Tired","\ud83e\udd12 Sick","\ud83d\ude28 Scared","\ud83d\ude15 Confused","\ud83d\ude33 Embarrassed","\ud83d\ude1f Worried","\ud83d\ude05 Nervous","\ud83d\ude0c Relaxed","\ud83d\ude4f Hopeful","\ud83d\ude0a Content","\ud83d\ude10 Bored","\ud83d\ude36 Neutral","\ud83e\udd7a Hurt"],T=(0,s.memo)((function(e){var t=e.dispatch;return(0,Z.jsx)(f.Jx,{tooltipProps:{title:"Feeling"},icon:(0,Z.jsx)("img",{src:N.qx,alt:"feelings"}),muiMenuProps:{anchorOrigin:{horizontal:"right",vertical:"top"}},children:function(e){return(0,Z.jsxs)(u.Z,{children:[(0,Z.jsx)(R.Z,{onClick:function(){return function(e){t({type:"feeling",payload:null}),e()}(e)},children:"None"}),z.map((function(n){return(0,Z.jsx)(R.Z,{onClick:function(){return function(e,n){t({type:"feeling",payload:e}),n()}(n,e)},children:n},n)}))]})}})})),U=n(3433),A=n(1413),D=function(e,t){switch(t.type){case"text":return(0,A.Z)((0,A.Z)({},e),{},{text:t.payload});case"emoji":return(0,A.Z)((0,A.Z)({},e),{},{text:e.text+t.payload});case"addImages":return(0,A.Z)((0,A.Z)({},e),{},{images:[].concat((0,U.Z)(e.images),(0,U.Z)(t.payload))});case"deleteImages":return(0,A.Z)((0,A.Z)({},e),{},{images:[]});case"feeling":return(0,A.Z)((0,A.Z)({},e),{},{feeling:t.payload});case"reset":return H;default:return e}},H={text:"",images:[],feeling:null},F=n(276),J=n(7799),M=n(2455);var K=(0,s.forwardRef)((function(e,t){var n=e.handleClose,g=(x.I8.currentUser,(0,c.Z)().palette),v=(0,s.useReducer)(D,H),b=(0,i.Z)(v,2),k=b[0],w=b[1],I=function(e){var t=x.I8.currentUser,n=(0,f.pm)(),o=n.toast,c=n.toastify,l=(0,s.useState)(!1),u=(0,i.Z)(l,2),d=u[0],p=u[1],m=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return a=(0,F.iH)(x.tO,"postImages/".concat(n,"-").concat(t.name)),e.abrupt("return",(0,F.KV)(a,t));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),h=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(){var a,i,s,o,l;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:return a=e.text,i=e.images,s=e.feeling,n.prev=3,p(!0),n.next=7,Promise.all(i.map((function(e){return m(e.file,t.uid)})));case 7:return o=n.sent,n.next=10,Promise.all(o.map((function(e){return e&&(0,F.Jt)(e.ref)})));case 10:return l=n.sent,n.next=13,(0,J.ET)((0,J.hJ)(x.db,"posts"),{ownerId:t.uid,content:a.replace(/\n/g,"<br>"),feeling:s,images:l,postedAt:(new Date).toLocaleString(),likes:[],totalComments:0});case 13:c("Post is submitted successfully","success"),p(!1),n.next=21;break;case 17:n.prev=17,n.t0=n.catch(3),(0,M.DK)(n.t0,c),p(!1);case 21:case"end":return n.stop()}}),n,null,[[3,17]])})));return function(){return n.apply(this,arguments)}}();return{handleSubmit:h,toast:o,isLoading:d}}(k),P=I.isLoading,E=I.toast,L=I.handleSubmit,N=k.text,R=k.images,z=k.feeling,U=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L();case 2:w({type:"reset"}),setTimeout((function(){return n()}),2e3);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,Z.jsxs)(h.E.div,{initial:{scale:.5},animate:{scale:1},className:"newPostInput",children:[(0,Z.jsxs)(l.Z,{children:[(0,Z.jsxs)(u.Z,{className:"header",children:[(0,Z.jsx)(d.Z,{onClick:n,children:(0,Z.jsx)(o.Z,{})}),(0,Z.jsx)(p.Z,{children:"Create Post"})]}),(0,Z.jsx)(m.Z,{}),(0,Z.jsxs)(u.Z,{className:"body",children:[(0,Z.jsx)(j,{feeling:z}),(0,Z.jsx)(y,{text:N,dispatch:w}),(0,Z.jsx)(C,{dispatch:w}),(0,Z.jsx)(S,{images:R,dispatch:w}),(0,Z.jsxs)(u.Z,{border:"1px solid ".concat(g.divider),className:"addons",children:[(0,Z.jsx)(p.Z,{children:"Add to your post"}),(0,Z.jsx)(O,{dispatch:w}),(0,Z.jsx)(T,{dispatch:w})]}),(0,Z.jsx)(f.Mm,{type:"button",text:"Post",isSubmitting:P,disabled:!N&&R.length<1&&!z,onClick:U})]})]}),(0,Z.jsx)(f.FN,{toast:E,anchorOrigin:{horizontal:"center",vertical:"bottom"}})]})})),W=K}}]);
//# sourceMappingURL=937.4feef679.chunk.js.map